<script lang="ts" setup>
import { watch } from 'vue'

import { useAppStateStore } from '@/stores'

const app_state_store = useAppStateStore()

watch(
  () => app_state_store.is_ready,
  (val) => {
    if (val) {
      setTimeout(() => {
        app_state_store.is_app_start_screen_show = false
      }, 500)

      return
    }

    app_state_store.is_app_start_screen_show = true
  }
)
</script>

<template>
  <div
    v-if="app_state_store.is_app_start_screen_show"
    class="AppStartScreen"
    :class="{ AppStartScreen_hidden: app_state_store.is_ready }"
  >
    <div class="AppStartScreen__content">
      <span class="AppStartScreen__version">{{ app_state_store.app_version }}</span>
      <svg width="142" height="30" viewBox="0 0 142 30" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M8.184 5.6C9.53333 5.6 10.7507 5.78333 11.836 6.15C12.9213 6.502 13.838 7.01533 14.586 7.69C15.3487 8.35 15.9353 9.15667 16.346 10.11C16.7567 11.0487 16.962 12.112 16.962 13.3C16.962 14.488 16.7567 15.5587 16.346 16.512C15.9353 17.4507 15.3487 18.2573 14.586 18.932C13.838 19.592 12.9213 20.1053 11.836 20.472C10.7507 20.824 9.53333 21 8.184 21H1.628V5.6H8.184ZM8.14 18.954C9.09333 18.954 9.95133 18.822 10.714 18.558C11.4767 18.294 12.1293 17.92 12.672 17.436C13.2147 16.9373 13.6253 16.3433 13.904 15.654C14.1973 14.95 14.344 14.1653 14.344 13.3C14.344 12.4347 14.1973 11.6573 13.904 10.968C13.6253 10.264 13.2147 9.67 12.672 9.186C12.1293 8.68733 11.4767 8.306 10.714 8.042C9.95133 7.778 9.09333 7.646 8.14 7.646H4.136V18.954H8.14ZM24.6751 21.308C22.7244 21.308 21.2137 20.8167 20.1431 19.834C19.0871 18.8367 18.5591 17.4213 18.5591 15.588C18.5591 13.7547 19.0871 12.3467 20.1431 11.364C21.2137 10.3813 22.7244 9.89 24.6751 9.89C26.6257 9.89 28.1291 10.3887 29.1851 11.386C30.2557 12.3687 30.7911 13.7767 30.7911 15.61C30.7911 17.4287 30.2557 18.8367 29.1851 19.834C28.1291 20.8167 26.6257 21.308 24.6751 21.308ZM20.8911 15.588C20.8911 16.8493 21.2137 17.8173 21.8591 18.492C22.5191 19.152 23.4577 19.482 24.6751 19.482C25.8924 19.482 26.8237 19.152 27.4691 18.492C28.1291 17.8173 28.4591 16.8493 28.4591 15.588C28.4591 14.3413 28.1291 13.388 27.4691 12.728C26.8237 12.0533 25.8924 11.716 24.6751 11.716C23.4577 11.716 22.5191 12.0533 21.8591 12.728C21.2137 13.388 20.8911 14.3413 20.8911 15.588ZM49.1238 14.862C49.1238 13.85 48.8964 13.08 48.4418 12.552C48.0018 12.024 47.3638 11.76 46.5278 11.76C45.4864 11.76 44.6798 12.156 44.1078 12.948C43.5358 13.7253 43.2498 14.8033 43.2498 16.182V21H40.9398V14.884C40.9398 13.872 40.7124 13.102 40.2578 12.574C39.8178 12.0313 39.1798 11.76 38.3438 11.76C37.3024 11.76 36.4958 12.156 35.9238 12.948C35.3518 13.7253 35.0658 14.8033 35.0658 16.182V21H32.7558V10.198H34.3398L34.9778 14.466H35.0878C35.1171 13.8647 35.2198 13.2927 35.3958 12.75C35.5864 12.1927 35.8504 11.7087 36.1878 11.298C36.5398 10.8727 36.9651 10.5353 37.4638 10.286C37.9771 10.022 38.5638 9.89 39.2238 9.89C40.4851 9.89 41.4384 10.308 42.0838 11.144C42.7438 11.9653 43.1104 13.0727 43.1838 14.466H43.2718C43.3011 13.8647 43.4038 13.2927 43.5798 12.75C43.7704 12.1927 44.0344 11.7087 44.3718 11.298C44.7091 10.8727 45.1271 10.5353 45.6258 10.286C46.1244 10.022 46.7111 9.89 47.3858 9.89C48.7058 9.89 49.7031 10.3007 50.3778 11.122C51.0671 11.9433 51.4118 13.1093 51.4118 14.62V21H49.1238V14.862ZM63.1936 14.422V16.116H53.6016V14.422H63.1936ZM73.308 17.128H73.154C73.11 17.5973 72.9853 18.0813 72.78 18.58C72.5893 19.064 72.3033 19.5113 71.922 19.922C71.5553 20.318 71.086 20.648 70.514 20.912C69.9566 21.1613 69.2893 21.286 68.512 21.286C67.2653 21.286 66.3046 21.0073 65.63 20.45C64.97 19.878 64.64 19.1007 64.64 18.118C64.64 17.546 64.75 17.0547 64.97 16.644C65.19 16.2333 65.498 15.896 65.894 15.632C66.3046 15.368 66.7886 15.1773 67.346 15.06C67.918 14.928 68.5486 14.862 69.238 14.862C69.986 14.862 70.69 14.8913 71.35 14.95C72.01 14.994 72.6186 15.0527 73.176 15.126L73.154 14.598C73.1393 13.674 72.868 12.9847 72.34 12.53C71.812 12.0607 71.042 11.826 70.03 11.826C69.326 11.826 68.6366 11.9067 67.962 12.068C67.2873 12.2293 66.6713 12.4347 66.114 12.684L65.894 10.792C66.5246 10.4987 67.2066 10.2787 67.94 10.132C68.688 9.97067 69.4506 9.89 70.228 9.89C72.0173 9.89 73.33 10.2933 74.166 11.1C75.0166 11.892 75.442 12.9847 75.442 14.378V21H73.858L73.308 17.128ZM66.95 17.656C66.95 18.2573 67.1773 18.7193 67.632 19.042C68.0866 19.3647 68.6953 19.526 69.458 19.526C69.9273 19.526 70.3746 19.46 70.8 19.328C71.24 19.1813 71.6286 18.9613 71.966 18.668C72.3033 18.3747 72.582 18.008 72.802 17.568C73.022 17.1133 73.154 16.5707 73.198 15.94L73.176 15.808C72.7213 15.764 72.2446 15.7273 71.746 15.698C71.262 15.6687 70.7266 15.654 70.14 15.654C68.0133 15.654 66.95 16.3213 66.95 17.656ZM89.6986 21H88.1146L87.5206 16.952H87.3886C87.242 18.3013 86.7653 19.3647 85.9586 20.142C85.152 20.9193 84.0593 21.308 82.6806 21.308C81.0526 21.308 79.7913 20.8167 78.8966 19.834C78.0166 18.8367 77.5766 17.4287 77.5766 15.61C77.5766 13.7767 78.0093 12.3687 78.8746 11.386C79.74 10.4033 80.9646 9.912 82.5486 9.912C83.9273 9.912 85.0346 10.2933 85.8706 11.056C86.7213 11.804 87.2273 12.8527 87.3886 14.202H87.4986L87.3886 10.638V4.698H89.6986V21ZM79.8866 15.61C79.8866 16.8273 80.1946 17.7733 80.8106 18.448C81.4266 19.108 82.3066 19.438 83.4506 19.438C84.6533 19.438 85.592 19.1007 86.2666 18.426C86.956 17.7367 87.3006 16.7687 87.3006 15.522C87.3006 14.334 86.956 13.4173 86.2666 12.772C85.592 12.112 84.6533 11.782 83.4506 11.782C82.3066 11.782 81.4266 12.112 80.8106 12.772C80.1946 13.432 79.8866 14.378 79.8866 15.61ZM109.044 14.862C109.044 13.85 108.816 13.08 108.362 12.552C107.922 12.024 107.284 11.76 106.448 11.76C105.406 11.76 104.6 12.156 104.028 12.948C103.456 13.7253 103.17 14.8033 103.17 16.182V21H100.86V14.884C100.86 13.872 100.632 13.102 100.178 12.574C99.7377 12.0313 99.0997 11.76 98.2637 11.76C97.2224 11.76 96.4157 12.156 95.8437 12.948C95.2717 13.7253 94.9857 14.8033 94.9857 16.182V21H92.6757V10.198H94.2597L94.8977 14.466H95.0077C95.037 13.8647 95.1397 13.2927 95.3157 12.75C95.5064 12.1927 95.7704 11.7087 96.1077 11.298C96.4597 10.8727 96.885 10.5353 97.3837 10.286C97.897 10.022 98.4837 9.89 99.1437 9.89C100.405 9.89 101.358 10.308 102.004 11.144C102.664 11.9653 103.03 13.0727 103.104 14.466H103.192C103.221 13.8647 103.324 13.2927 103.5 12.75C103.69 12.1927 103.954 11.7087 104.292 11.298C104.629 10.8727 105.047 10.5353 105.546 10.286C106.044 10.022 106.631 9.89 107.306 9.89C108.626 9.89 109.623 10.3007 110.298 11.122C110.987 11.9433 111.332 13.1093 111.332 14.62V21H109.044V14.862ZM113.852 7.096C113.852 6.71467 113.976 6.42133 114.226 6.216C114.49 6.01067 114.856 5.908 115.326 5.908C115.795 5.908 116.154 6.01067 116.404 6.216C116.653 6.42133 116.778 6.71467 116.778 7.096C116.778 7.47733 116.653 7.77067 116.404 7.976C116.154 8.16667 115.795 8.262 115.326 8.262C114.856 8.262 114.49 8.16667 114.226 7.976C113.976 7.77067 113.852 7.47733 113.852 7.096ZM116.822 21H114.534V12.068H113.5V10.198H116.822V21ZM121.373 10.198L121.967 14.422H122.077C122.15 13.806 122.297 13.2267 122.517 12.684C122.737 12.1267 123.038 11.6427 123.419 11.232C123.8 10.8213 124.27 10.4987 124.827 10.264C125.384 10.0147 126.022 9.89 126.741 9.89C128.134 9.89 129.227 10.308 130.019 11.144C130.811 11.98 131.207 13.168 131.207 14.708V21H128.897V14.928C128.897 13.916 128.633 13.1387 128.105 12.596C127.577 12.0387 126.807 11.76 125.795 11.76C125.208 11.76 124.68 11.8773 124.211 12.112C123.742 12.332 123.346 12.64 123.023 13.036C122.715 13.432 122.473 13.9013 122.297 14.444C122.136 14.9867 122.055 15.5733 122.055 16.204V21H119.767V10.198H121.373Z"
          fill="#1a1a1a"
        />
        <rect x="134" width="8" height="8" fill="#EC3A39" />
      </svg>
    </div>
  </div>
</template>

<style lang="scss">
.AppStartScreen {
  position: fixed;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  background-color: $c_body;

  z-index: 9998;
}

.AppStartScreen__version {
  position: absolute;
  top: 5px;
  right: 5px;
  color: #1a1a1a;
  font-size: 1vmin;
}

.AppStartScreen_hidden {
  animation: AppStartScreen_hidden 500ms ease-in-out;
  transform: translateX(100%);
}

.AppStartScreen__content {
  svg {
    //transform: scale(1.8);
    height: auto;
    width: 30vmin;

    rect {
      animation: rect 500ms ease-in-out;
      animation-iteration-count: infinite;
      -moz-animation-iteration-count: infinite;
      -webkit-animation-iteration-count: infinite;
      -o-animation-iteration-count: infinite;
    }
  }
}

@keyframes rect {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes AppStartScreen_hidden {
  from {
    transform: translateX(0%);
  }

  to {
    transform: translateX(100%);
  }
}

.AppStartScreen__content {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.AppStartScreen__h1 {
  @include setFontStyle1();
  color: $c_primary;
}
</style>
